<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Payment Reminder Email Template -->
        <record id="email_template_payment_reminder" model="mail.template">
            <field name="name">AMS Payment Reminder</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="subject">Payment Reminder - Invoice ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email) | safe}</field>
            <field name="email_to">${object.partner_id.email | safe}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <div style="margin: 0px; padding: 0px; font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFFFFF;">
        
        <div style="margin: 20px 0px 20px 0px;">
            <img src="/logo.png" style="padding: 0px; margin: 0px; height: auto; width: 120px;" alt="${object.company_id.name}"/>
        </div>
        
        <div style="margin: 0px; padding: 0px; width: 100%;">
            <h2 style="color: #875A7B; margin: 0 0 10px 0;">Payment Reminder</h2>
            
            <p>Dear ${object.partner_id.name},</p>
            
            <p>We hope this message finds you well. This is a friendly reminder that your invoice is now overdue for payment.</p>
            
            <div style="border: 1px solid #e0e0e0; border-radius: 5px; padding: 15px; margin: 15px 0; background-color: #f9f9f9;">
                <strong>Invoice Number:</strong> ${object.name}<br/>
                <strong>Invoice Date:</strong> ${object.invoice_date}<br/>
                <strong>Due Date:</strong> ${object.invoice_date_due}<br/>
                <strong>Amount Due:</strong> ${object.amount_residual} ${object.currency_id.name}<br/>
                % if object.subscription_id:
                <strong>Subscription:</strong> ${object.subscription_id.name}<br/>
                % endif
                % if object.billing_period_start and object.billing_period_end:
                <strong>Billing Period:</strong> ${object.billing_period_start} to ${object.billing_period_end}<br/>
                % endif
                <strong>Days Overdue:</strong> ${object.days_overdue}<br/>
            </div>
            
            <p>Please arrange for payment at your earliest convenience. You can view and pay this invoice online using the link below:</p>
            
            <div style="margin: 20px 0; text-align: center;">
                <a href="${object.get_payment_portal_url()}" style="background-color: #875A7B; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">View &amp; Pay Invoice</a>
            </div>
            
            <p>If you have already made this payment, please disregard this notice. If you have any questions about this invoice or need assistance, please don't hesitate to contact us.</p>
            
            <p>Thank you for your continued membership with ${object.company_id.name}.</p>
            
            <br/>
            <p>Best regards,<br/>
            The ${object.company_id.name} Team</p>
            
            <hr style="border: 0; border-top: 1px solid #e0e0e0; margin: 20px 0;"/>
            <p style="font-size: 11px; color: #666;">
                This is an automated reminder for invoice ${object.name}. Please contact us if you have any questions.
            </p>
        </div>
    </div>
</div>
            </field>
        </record>

        <!-- Invoice Auto-Send Notification Template -->
        <record id="email_template_invoice_notification" model="mail.template">
            <field name="name">AMS Invoice Notification</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="subject">New Invoice - ${object.name}</field>
            <field name="email_from">${(object.company_id.email or user.email) | safe}</field>
            <field name="email_to">${object.partner_id.email | safe}</field>
            <field name="lang">${object.partner_id.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <div style="margin: 0px; padding: 0px; font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFFFFF;">
        
        <div style="margin: 20px 0px 20px 0px;">
            <img src="/logo.png" style="padding: 0px; margin: 0px; height: auto; width: 120px;" alt="${object.company_id.name}"/>
        </div>
        
        <div style="margin: 0px; padding: 0px; width: 100%;">
            <h2 style="color: #875A7B; margin: 0 0 10px 0;">New Invoice Available</h2>
            
            <p>Dear ${object.partner_id.name},</p>
            
            <p>Your new invoice is now available for your ${object.subscription_id.name if object.subscription_id else 'membership'}.</p>
            
            <div style="border: 1px solid #e0e0e0; border-radius: 5px; padding: 15px; margin: 15px 0; background-color: #f9f9f9;">
                <strong>Invoice Number:</strong> ${object.name}<br/>
                <strong>Invoice Date:</strong> ${object.invoice_date}<br/>
                <strong>Due Date:</strong> ${object.invoice_date_due}<br/>
                <strong>Amount:</strong> ${object.amount_total} ${object.currency_id.name}<br/>
                % if object.subscription_id:
                <strong>Subscription:</strong> ${object.subscription_id.name}<br/>
                % endif
                % if object.billing_period_start and object.billing_period_end:
                <strong>Service Period:</strong> ${object.billing_period_start} to ${object.billing_period_end}<br/>
                % endif
            </div>
            
            <p>You can view and pay this invoice online using the link below:</p>
            
            <div style="margin: 20px 0; text-align: center;">
                <a href="${object.get_payment_portal_url()}" style="background-color: #875A7B; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">View &amp; Pay Invoice</a>
            </div>
            
            <p>If you have any questions about this invoice, please don't hesitate to contact us.</p>
            
            <p>Thank you for your continued membership with ${object.company_id.name}.</p>
            
            <br/>
            <p>Best regards,<br/>
            The ${object.company_id.name} Team</p>
            
            <hr style="border: 0; border-top: 1px solid #e0e0e0; margin: 20px 0;"/>
            <p style="font-size: 11px; color: #666;">
                This is an automated notification for invoice ${object.name}. Please keep this email for your records.
            </p>
        </div>
    </div>
</div>
            </field>
        </record>

        <!-- Billing Error Notification Template (Internal Use) -->
        <record id="email_template_billing_error" model="mail.template">
            <field name="name">AMS Billing Error Notification</field>
            <field name="model_id" ref="model_ams_billing_event"/>
            <field name="subject">Billing Error - ${object.subscription_id.name}</field>
            <field name="email_from">${(object.company_id.email or user.email) | safe}</field>
            <field name="email_to">${user.email | safe}</field>
            <field name="lang">en_US</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <div style="margin: 0px; padding: 0px; font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFFFFF;">
        
        <div style="margin: 0px; padding: 0px; width: 100%;">
            <h2 style="color: #d9534f; margin: 0 0 10px 0;">⚠️ Billing Error Report</h2>
            
            <p>A billing error has occurred that requires attention:</p>
            
            <div style="border: 2px solid #d9534f; border-radius: 5px; padding: 15px; margin: 15px 0; background-color: #f2dede;">
                <strong>Billing Event:</strong> ${object.name}<br/>
                <strong>Subscription:</strong> ${object.subscription_id.name}<br/>
                <strong>Customer:</strong> ${object.partner_id.name}<br/>
                <strong>Event Date:</strong> ${object.event_date}<br/>
                <strong>Error Message:</strong> ${object.error_message}<br/>
            </div>
            
            <p>Please review this billing event and take appropriate action.</p>
            
            <div style="margin: 20px 0; text-align: center;">
                <a href="/web#id=${object.id}&view_type=form&model=ams.billing.event" style="background-color: #d9534f; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">Review Billing Event</a>
            </div>
            
            <p>This is an automated notification from the AMS billing system.</p>
        </div>
    </div>
</div>
            </field>
        </record>

    </data>
</odoo>