<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Membership Card Report -->
    <record id="report_membership_card" model="ir.actions.report">
        <field name="name">Membership Card</field>
        <field name="model">membership.membership</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">membership_base.membership_card_document</field>
        <field name="report_file">membership_base.membership_card_document</field>
        <field name="binding_model_id" ref="model_membership_membership"/>
        <field name="binding_type">report</field>
    </record>

    <!-- Card Template -->
    <template id="membership_card_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="membership">
                <div class="page" style="padding: 0; margin: 0;">
                    <!-- Business Card Size: 3.5" x 2" -->
                    <div style="width: 252pt; height: 144pt; border: 2pt solid #007bff; border-radius: 8pt; padding: 10pt; margin: 20pt; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-family: Arial, sans-serif;">
                        
                        <!-- Header -->
                        <div style="text-align: center; margin-bottom: 8pt;">
                            <h3 style="margin: 0; font-size: 12pt; color: white;">
                                <span t-field="membership.company_id.name"/>
                            </h3>
                            <hr style="border: 1px solid rgba(255,255,255,0.3); margin: 4pt 0;"/>
                        </div>
                        
                        <!-- Member Info -->
                        <div style="text-align: center;">
                            <h2 style="margin: 4pt 0; font-size: 14pt; color: white;">
                                <span t-field="membership.partner_id.name"/>
                            </h2>
                            <p style="margin: 2pt 0; font-size: 10pt; color: white;">
                                <strong t-field="membership.level_id.name"/>
                            </p>
                            <p style="margin: 2pt 0; font-size: 9pt; color: white;">
                                Card #: <span t-field="membership.card_number"/>
                            </p>
                            <p style="margin: 2pt 0; font-size: 9pt; color: white;">
                                Valid Until: <span t-field="membership.end_date" t-options="{'format': 'MM/dd/yyyy'}"/>
                            </p>
                            <t t-if="membership.chapter_id">
                                <p style="margin: 2pt 0; font-size: 9pt; color: white;">
                                    Chapter: <span t-field="membership.chapter_id.name"/>
                                </p>
                            </t>
                        </div>
                        
                        <!-- QR Code -->
                        <div style="position: absolute; bottom: 8pt; right: 8pt;">
                            <t t-if="membership.qr_code">
                                <img t-att-src="'data:image/png;base64,' + membership.qr_code.decode()" 
                                     style="width: 40pt; height: 40pt;"/>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>

</odoo>