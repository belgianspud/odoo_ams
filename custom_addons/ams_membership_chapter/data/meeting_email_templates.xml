<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Meeting Invitation Email Template -->
        <record id="email_template_meeting_invitation" model="mail.template">
            <field name="name">Chapter Meeting Invitation</field>
            <field name="model_id" ref="model_membership_chapter_meeting"/>
            <field name="subject">{{ object.chapter_id.name }} Meeting Invitation - {{ object.name }}</field>
            <field name="email_to">{{ ','.join([member.email for member in object.invited_ids if member.email]) }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <h2>You're Invited to a Chapter Meeting!</h2>
                    
                    <p>Dear Chapter Member,</p>
                    
                    <p>You're cordially invited to attend our upcoming meeting.</p>
                    
                    <!-- Meeting Details -->
                    <div style="border: 2px solid #007bff; border-radius: 10px; padding: 20px; margin: 20px 0; background-color: #f8f9fa;">
                        <h3 style="margin-top: 0; color: #007bff;">Meeting Details</h3>
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold; width: 30%;">Meeting:</td>
                                <td style="padding: 5px 0;">{{ object.name }}</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Date &amp; Time:</td>
                                <td style="padding: 5px 0;">{{ object.meeting_date.strftime('%A, %B %d, %Y at %I:%M %p') if object.meeting_date else 'TBD' }}</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Duration:</td>
                                <td style="padding: 5px 0;">{{ object.duration }} hours</td>
                            </tr>
                            <tr t-if="object.is_virtual">
                                <td style="padding: 5px 0; font-weight: bold;">Meeting Link:</td>
                                <td style="padding: 5px 0;"><a href="{{ object.meeting_url or '#' }}">{{ object.meeting_url or 'Link will be provided' }}</a></td>
                            </tr>
                            <tr t-if="object.is_virtual and object.access_code">
                                <td style="padding: 5px 0; font-weight: bold;">Access Code:</td>
                                <td style="padding: 5px 0;">{{ object.access_code }}</td>
                            </tr>
                            <tr t-if="not object.is_virtual">
                                <td style="padding: 5px 0; font-weight: bold;">Location:</td>
                                <td style="padding: 5px 0;">{{ object.location or 'TBD' }}</td>
                            </tr>
                            <tr t-if="not object.is_virtual and object.address">
                                <td style="padding: 5px 0; font-weight: bold;">Address:</td>
                                <td style="padding: 5px 0;">{{ object.address }}</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div t-if="object.agenda">
                        <h3>ðŸ“‹ Agenda</h3>
                        <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 15px 0; border-radius: 5px;">
                            {{ object.agenda | safe }}
                        </div>
                    </div>
                    
                    <!-- RSVP Section -->
                    <div style="text-align: center; margin: 30px 0;">
                        <h3>Please RSVP</h3>
                        <p>Please respond to confirm your attendance.</p>
                    </div>
                    
                    <p>We look forward to seeing you there!</p>
                    
                    <p>Best regards,<br/>
                    {{ object.organizer_id.name or 'Chapter Leadership' }}<br/>
                    {{ object.chapter_id.name }}</p>
                </div>
            </field>
        </record>

        <!-- Meeting Reminder Email Template -->
        <record id="email_template_meeting_reminder" model="mail.template">
            <field name="name">Chapter Meeting Reminder</field>
            <field name="model_id" ref="model_membership_chapter_meeting"/>
            <field name="subject">Reminder: {{ object.name }} - Tomorrow!</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <h2>Meeting Reminder</h2>
                    
                    <p>Hi there,</p>
                    
                    <p>This is a friendly reminder about our chapter meeting tomorrow:</p>
                    
                    <div style="border: 2px solid #ffc107; border-radius: 10px; padding: 20px; margin: 20px 0; background-color: #fff3cd;">
                        <h3 style="margin-top: 0; color: #8a6d3b;">{{ object.name }}</h3>
                        <p><strong>When:</strong> {{ object.meeting_date.strftime('%A, %B %d at %I:%M %p') if object.meeting_date else 'TBD' }}</p>
                        <p t-if="object.is_virtual"><strong>Join Link:</strong> <a href="{{ object.meeting_url or '#' }}">{{ object.meeting_url or 'Link will be provided' }}</a></p>
                        <p t-if="not object.is_virtual"><strong>Where:</strong> {{ object.location or 'TBD' }}</p>
                    </div>
                    
                    <p>Don't forget to:</p>
                    <ul>
                        <li>Review the agenda (attached or in original invitation)</li>
                        <li>Bring any materials mentioned in the agenda</li>
                        <li t-if="object.is_virtual">Test your audio/video setup beforehand</li>
                        <li t-if="object.is_virtual">Join a few minutes early</li>
                        <li t-if="not object.is_virtual">Allow extra time for parking and check-in</li>
                    </ul>
                    
                    <p>See you tomorrow!</p>
                    
                    <p>Best regards,<br/>
                    {{ object.chapter_id.name }}</p>
                </div>
            </field>
        </record>

        <!-- Meeting Cancellation Email Template -->
        <record id="email_template_meeting_cancellation" model="mail.template">
            <field name="name">Chapter Meeting Cancellation</field>
            <field name="model_id" ref="model_membership_chapter_meeting"/>
            <field name="subject">Meeting Cancelled: {{ object.name }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <h2>Meeting Cancellation Notice</h2>
                    
                    <p>Dear Chapter Member,</p>
                    
                    <p>We regret to inform you that the following meeting has been <strong>cancelled</strong>:</p>
                    
                    <div style="border: 2px solid #dc3545; border-radius: 10px; padding: 20px; margin: 20px 0; background-color: #f8d7da;">
                        <h3 style="margin-top: 0; color: #721c24;">{{ object.name }}</h3>
                        <p><strong>Originally scheduled:</strong> {{ object.meeting_date.strftime('%A, %B %d at %I:%M %p') if object.meeting_date else 'TBD' }}</p>
                    </div>
                    
                    <div t-if="object.next_meeting_date" style="background-color: #d4edda; border: 1px solid #c3e6cb; padding: 15px; margin: 15px 0; border-radius: 5px;">
                        <h4 style="margin-top: 0; color: #155724;">Next Meeting Scheduled</h4>
                        <p>Our next meeting is scheduled for {{ object.next_meeting_date.strftime('%A, %B %d at %I:%M %p') if object.next_meeting_date else 'TBD' }}. 
                        You'll receive a separate invitation for that meeting.</p>
                    </div>
                    
                    <p>We apologize for any inconvenience this may cause. If you have any questions, 
                    please don't hesitate to contact chapter leadership.</p>
                    
                    <p>Thank you for your understanding.</p>
                    
                    <p>Best regards,<br/>
                    {{ object.chapter_id.name }}</p>
                </div>
            </field>
        </record>

    </data>
</odoo>