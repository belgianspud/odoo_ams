<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Waitlist Confirmation Email Template -->
        <record id="email_template_waitlist_confirmation" model="mail.template">
            <field name="name">Waitlist Confirmation</field>
            <field name="model_id" ref="model_event_waitlist"/>
            <field name="subject">Waitlist Confirmation - {{ object.event_id.name }}</field>
            <field name="email_to">{{ object.partner_id.email }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <h2>üìã Waitlist Confirmation</h2>
                    
                    <p>Dear {{ object.partner_id.name }},</p>
                    
                    <p>Thank you for your interest in our event. You have been successfully added to the waitlist!</p>
                    
                    <!-- Event Details -->
                    <div style="border: 2px solid #17a2b8; border-radius: 10px; padding: 20px; margin: 20px 0; background-color: #d1ecf1;">
                        <h3 style="margin-top: 0; color: #0c5460;">Event Details</h3>
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Event:</td>
                                <td style="padding: 5px 0;">{{ object.event_id.name }}</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Date:</td>
                                <td style="padding: 5px 0;">{{ object.event_id.date_begin.strftime('%A, %B %d, %Y at %I:%M %p') }}</td>
                            </tr>
                            {% if object.event_id.address_id %}
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Location:</td>
                                <td style="padding: 5px 0;">{{ object.event_id.address_id.contact_address }}</td>
                            </tr>
                            {% endif %}
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Your Position:</td>
                                <td style="padding: 5px 0; font-size: 18px; font-weight: bold; color: #0c5460;"># {{ object.position }}</td>
                            </tr>
                        </table>
                    </div>
                    
                    <h3>What happens next?</h3>
                    <ul>
                        <li><strong>We'll monitor availability:</strong> We'll keep track of event capacity and cancellations</li>
                        <li><strong>Priority notification:</strong> {% if object.is_member %}As a member, you have priority in the waitlist{% else %}You'll be notified based on waitlist order{% endif %}</li>
                        <li><strong>Quick response needed:</strong> If a spot opens up, you'll have {{ object.response_hours }} hours to confirm</li>
                        <li><strong>Automatic registration:</strong> Once confirmed, we'll handle your registration immediately</li>
                    </ul>
                    
                    {% if object.event_id.member_waitlist_priority and not object.is_member %}
                    <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; margin: 15px 0; border-radius: 5px;">
                        <h4 style="margin-top: 0; color: #8a6d3b;">üí° Member Priority</h4>
                        <p>Did you know that members get priority on event waitlists? 
                        <a href="#">Consider becoming a member</a> to improve your chances of getting into popular events!</p>
                    </div>
                    {% endif %}
                    
                    <div style="background-color: #d4edda; border: 1px solid #c3e6cb; padding: 15px; margin: 15px 0; border-radius: 5px;">
                        <h4 style="margin-top: 0; color: #155724;">üì± Stay Connected</h4>
                        <ul style="margin-bottom: 0;">
                            <li>Make sure your email and phone are up to date</li>
                            <li>Check your email regularly for waitlist notifications</li>
                            <li>Add our email to your contacts to avoid spam filters</li>
                            <li>You can cancel your waitlist position anytime by contacting us</li>
                        </ul>
                    </div>
                    
                    <p>We appreciate your patience and hope to see you at the event!</p>
                    
                    <p>Best regards,<br/>
                    The Event Team</p>
                </div>
            </field>
        </record>

        <!-- Spot Available Notification Email Template -->
        <record id="email_template_waitlist_spot_available" model="mail.template">
            <field name="name">Waitlist - Spot Available</field>
            <field name="model_id" ref="model_event_waitlist"/>
            <field name="subject">üéâ Spot Available! {{ object.event_id.name }} - Respond by {{ object.notification_expires.strftime('%B %d at %I:%M %p') }}</field>
            <field name="email_to">{{ object.partner_id.email }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <h2>üéâ Great News! A Spot is Available!</h2>
                    
                    <p>Dear {{ object.partner_id.name }},</p>
                    
                    <p>Exciting news! A spot has opened up for the event you're waitlisted for, and it's yours if you want it!</p>
                    
                    <!-- Event Details -->
                    <div style="border: 2px solid #28a745; border-radius: 10px; padding: 20px; margin: 20px 0; background-color: #d4edda;">
                        <h3 style="margin-top: 0; color: #155724;">üéØ Event Details</h3>
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Event:</td>
                                <td style="padding: 5px 0;">{{ object.event_id.name }}</td>
                            </tr>
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Date:</td>
                                <td style="padding: 5px 0;">{{ object.event_id.date_begin.strftime('%A, %B %d, %Y at %I:%M %p') }}</td>
                            </tr>
                            {% if object.event_id.address_id %}
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold;">Location:</td>
                                <td style="padding: 5px 0;">{{ object.event_id.address_id.contact_address }}</td>
                            </tr>
                            {% endif %}
                            <tr>
                                <td style="padding: 5px 0; font-weight: bold; color: #155724;">Registration Fee:</td>
                                <td style="padding: 5px 0; font-weight: bold; color: #155724;">${{ object.event_id.registration_ids[0].price if object.event_id.registration_ids else 'TBD' }}</td>
                            </tr>
                        </table>
                    </div>
                    
                    <!-- Urgent Action Required -->
                    <div style="border: 2px solid #ffc107; border-radius: 10px; padding: 20px; margin: 20px 0; background-color: #fff3cd; text-align: center;">
                        <h3 style="margin-top: 0; color: #8a6d3b;">‚è∞ Action Required by {{ object.notification_expires.strftime('%B %d at %I:%M %p') }}</h3>
                        <p style="font-size: 16px; margin: 20px 0;">You have <strong>{{ object.response_hours }} hours</strong> to confirm your registration.</p>
                        
                        <div style="margin: 30px 0;">
                            <a href="/event/waitlist/register/{{ object.id }}" 
                               style="background-color: #28a745; color: white; padding: 15px 30px; text-decoration: none; border-radius: 5px; font-size: 18px; margin: 0 10px;">
                                ‚úÖ Yes, I want to register!
                            </a>
                            <br/><br/>
                            <a href="/event/waitlist/decline/{{ object.id }}" 
                               style="background-color: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-size: 14px;">
                                ‚ùå No thanks, remove me from waitlist
                            </a>
                        </div>
                    </div>
                    
                    <h3>‚ö†Ô∏è Important:</h3>
                    <ul>
                        <li><strong>Time-sensitive:</strong> This offer expires in {{ object.response_hours }} hours</li>
                        <li><strong>First come, first served:</strong> If you don't respond in time, we'll offer it to the next person</li>
                        <li><strong>Payment required:</strong> You'll need to complete payment to secure your spot</li>
                        <li><strong>Questions?</strong> Contact us immediately - don't wait until the deadline</li>
                    </ul>
                    
                    <div style="background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; margin: 15px 0; border-radius: 5px;">
                        <h4 style="margin-top: 0; color: #721c24;">üö® Don't Miss Out!</h4>
                        <p style="margin-bottom: 0;">This is a limited-time opportunity. If you don't respond by the deadline, 
                        your spot will be offered to the next person on the waitlist.</p>
                    </div>
                    
                    <p>We're excited about the possibility of having you join us!</p>
                    
                    <p>Best regards,<br/>
                    The Event Team</p>
                </div>
            </field>
        </record>

    </data>
</odoo>