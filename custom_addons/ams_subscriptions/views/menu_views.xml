<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Main Menu -->
    <menuitem id="menu_ams_root" name="AMS" web_icon="ams_subscriptions,static/description/icon.png" sequence="10"/>
    
    <!-- Subscriptions Menu -->
    <menuitem id="menu_ams_subscriptions" name="Subscriptions" parent="menu_ams_root" sequence="10"/>
    
    <!-- Subscription sub-menus -->
    <menuitem id="menu_ams_subscription_all" name="All Subscriptions" parent="menu_ams_subscriptions" 
              action="action_ams_subscription" sequence="10"/>
    
    <menuitem id="menu_ams_subscription_memberships" name="Memberships" parent="menu_ams_subscriptions" 
              action="action_ams_subscription" sequence="20"/>
    
    <menuitem id="menu_ams_subscription_chapters" name="Chapters" parent="menu_ams_subscriptions" 
              action="action_ams_subscription" sequence="30"/>
    
    <menuitem id="menu_ams_subscription_publications" name="Publications" parent="menu_ams_subscriptions" 
              action="action_ams_subscription" sequence="40"/>

    <!-- Configuration Menu -->
    <menuitem id="menu_ams_configuration" name="Configuration" parent="menu_ams_root" sequence="90"/>
    
    <menuitem id="menu_ams_subscription_types" name="Subscription Types" parent="menu_ams_configuration" 
              action="action_ams_subscription_type" sequence="10"/>
    
    <!-- ADD THIS LINE -->
    <menuitem id="menu_ams_chapters" name="Chapters" parent="menu_ams_configuration" 
              action="action_ams_chapter" sequence="20"/>
    
    <!--<menuitem id="menu_ams_subscription_products" name="Subscription Products" parent="menu_ams_configuration" 
              action="action_subscription_products" sequence="20"/>-->

    <!-- Add context to filter menus -->
    <record id="action_ams_subscription_memberships" model="ir.actions.act_window">
        <field name="name">Memberships</field>
        <field name="res_model">ams.subscription</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('subscription_code', '=', 'membership')]</field>
        <field name="context">{'default_subscription_code': 'membership', 'search_default_active': 1}</field>
    </record>

    <record id="action_ams_subscription_chapters" model="ir.actions.act_window">
        <field name="name">Chapters</field>
        <field name="res_model">ams.subscription</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('subscription_code', '=', 'chapter')]</field>
        <field name="context">{'default_subscription_code': 'chapter', 'search_default_active': 1}</field>
    </record>

    <record id="action_ams_subscription_publications" model="ir.actions.act_window">
        <field name="name">Publications</field>
        <field name="res_model">ams.subscription</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('subscription_code', '=', 'publication')]</field>
        <field name="context">{'default_subscription_code': 'publication', 'search_default_active': 1}</field>
    </record>

    <!-- Update menu items to use the filtered actions -->
    <menuitem id="menu_ams_subscription_memberships" action="action_ams_subscription_memberships"/>
    <menuitem id="menu_ams_subscription_chapters" action="action_ams_subscription_chapters"/>
    <menuitem id="menu_ams_subscription_publications" action="action_ams_subscription_publications"/>
</odoo>