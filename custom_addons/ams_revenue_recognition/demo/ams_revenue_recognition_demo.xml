<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Demo Customers for Revenue Recognition -->
    <record id="demo_customer_acme_corp" model="res.partner">
        <field name="name">ACME Corporation</field>
        <field name="is_company" eval="True"/>
        <field name="email">billing@acmecorp.com</field>
        <field name="phone">+1-555-0123</field>
        <field name="street">123 Business Ave</field>
        <field name="city">Enterprise City</field>
        <field name="state_id" ref="base.state_us_5"/>
        <field name="zip">12345</field>
        <field name="country_id" ref="base.us"/>
        <field name="customer_rank">1</field>
    </record>

    <record id="demo_customer_medical_group" model="res.partner">
        <field name="name">Metro Medical Group</field>
        <field name="is_company" eval="True"/>
        <field name="email">admin@metromedical.com</field>
        <field name="phone">+1-555-0456</field>
        <field name="street">456 Healthcare Blvd</field>
        <field name="city">Medical Center</field>
        <field name="state_id" ref="base.state_us_5"/>
        <field name="zip">67890</field>
        <field name="country_id" ref="base.us"/>
        <field name="customer_rank">1</field>
    </record>

    <record id="demo_customer_dr_smith" model="res.partner">
        <field name="name">Dr. Sarah Smith</field>
        <field name="is_company" eval="False"/>
        <field name="email">dr.smith@email.com</field>
        <field name="phone">+1-555-0789</field>
        <field name="street">789 Professional Dr</field>
        <field name="city">Doctorville</field>
        <field name="state_id" ref="base.state_us_5"/>
        <field name="zip">11111</field>
        <field name="country_id" ref="base.us"/>
        <field name="customer_rank">1</field>
    </record>

    <!-- Demo Products with Revenue Recognition -->
    <record id="demo_product_enterprise_membership" model="product.template">
        <field name="name">Enterprise Membership - Annual</field>
        <field name="type">service</field>
        <field name="list_price">5000.00</field>
        <field name="standard_price">500.00</field>
        <field name="is_subscription_product" eval="True"/>
        <field name="use_ams_accounting" eval="True"/>
        <field name="ams_product_type">enterprise</field>
        <field name="subscription_period">annual</field>
        
        <!-- Revenue Recognition Configuration -->
        <field name="revenue_recognition_method">straight_line</field>
        <field name="revenue_recognition_period">subscription_period</field>
        <field name="recognition_frequency">monthly</field>
        <field name="auto_create_recognition_schedule" eval="True"/>
        <field name="is_distinct_service" eval="True"/>
        <field name="standalone_selling_price">5000.00</field>
        <field name="performance_obligation_description">Provision of enterprise membership services including access to resources, networking events, and premium content over a 12-month period.</field>
        <field name="allow_contract_modifications" eval="True"/>
        <field name="modification_treatment">prospective</field>
        <field name="enable_proration" eval="True"/>
    </record>

    <record id="demo_product_individual_membership" model="product.template">
        <field name="name">Individual Membership - Annual</field>
        <field name="type">service</field>
        <field name="list_price">500.00</field>
        <field name="standard_price">50.00</field>
        <field name="is_subscription_product" eval="True"/>
        <field name="use_ams_accounting" eval="True"/>
        <field name="ams_product_type">individual</field>
        <field name="subscription_period">annual</field>
        
        <!-- Revenue Recognition Configuration -->
        <field name="revenue_recognition_method">straight_line</field>
        <field name="revenue_recognition_period">subscription_period</field>
        <field name="recognition_frequency">monthly</field>
        <field name="auto_create_recognition_schedule" eval="True"/>
        <field name="is_distinct_service" eval="True"/>
        <field name="standalone_selling_price">500.00</field>
        <field name="performance_obligation_description">Provision of individual membership services including access to basic resources and member benefits over a 12-month period.</field>
        <field name="allow_contract_modifications" eval="True"/>
        <field name="modification_treatment">prospective</field>
        <field name="enable_proration" eval="True"/>
    </record>

    <record id="demo_product_monthly_membership" model="product.template">
        <field name="name">Individual Membership - Monthly</field>
        <field name="type">service</field>
        <field name="list_price">50.00</field>
        <field name="standard_price">5.00</field>
        <field name="is_subscription_product" eval="True"/>
        <field name="use_ams_accounting" eval="True"/>
        <field name="ams_product_type">individual</field>
        <field name="subscription_period">monthly</field>
        
        <!-- Revenue Recognition Configuration -->
        <field name="revenue_recognition_method">immediate</field>
        <field name="revenue_recognition_period">immediate</field>
        <field name="recognition_frequency">monthly</field>
        <field name="auto_create_recognition_schedule" eval="True"/>
        <field name="is_distinct_service" eval="True"/>
        <field name="standalone_selling_price">50.00</field>
        <field name="performance_obligation_description">Provision of individual membership services for one month period with immediate revenue recognition.</field>
        <field name="allow_contract_modifications" eval="True"/>
        <field name="modification_treatment">prospective</field>
        <field name="enable_proration" eval="True"/>
    </record>

    <record id="demo_product_publication" model="product.template">
        <field name="name">Medical Journal Subscription</field>
        <field name="type">service</field>
        <field name="list_price">200.00</field>
        <field name="standard_price">20.00</field>
        <field name="is_subscription_product" eval="True"/>
        <field name="use_ams_accounting" eval="True"/>
        <field name="ams_product_type">publication</field>
        <field name="subscription_period">annual</field>
        
        <!-- Revenue Recognition Configuration -->
        <field name="revenue_recognition_method">straight_line</field>
        <field name="revenue_recognition_period">subscription_period</field>
        <field name="recognition_frequency">monthly</field>
        <field name="auto_create_recognition_schedule" eval="True"/>
        <field name="is_distinct_service" eval="True"/>
        <field name="standalone_selling_price">200.00</field>
        <field name="performance_obligation_description">Delivery of medical journal content and access to digital publication platform over a 12-month period.</field>
        <field name="allow_contract_modifications" eval="True"/>
        <field name="modification_treatment">prospective</field>
        <field name="enable_proration" eval="True"/>
    </record>

    <!-- Demo Revenue Schedules -->
    <record id="demo_revenue_schedule_acme_enterprise" model="ams.revenue.schedule">
        <field name="name">Enterprise Membership - ACME Corp</field>
        <field name="total_contract_value">5000.00</field>
        <field name="start_date" eval="(datetime.now() - timedelta(days=60)).date()"/>
        <field name="end_date" eval="(datetime.now() + timedelta(days=305)).date()"/>
        <field name="recognition_method">straight_line</field>
        <field name="recognition_frequency">monthly</field>
        <field name="state">active</field>
        <field name="is_auto_recognition" eval="True"/>
        <field name="performance_obligation_id">PO-ACME-ENT-2024</field>
        <field name="partner_id" ref="demo_customer_acme_corp"/>
        <field name="product_id" ref="demo_product_enterprise_membership"/>
    </record>

    <record id="demo_revenue_schedule_medical_group" model="ams.revenue.schedule">
        <field name="name">Enterprise Membership - Metro Medical</field>
        <field name="total_contract_value">5000.00</field>
        <field name="start_date" eval="(datetime.now() - timedelta(days=30)).date()"/>
        <field name="end_date" eval="(datetime.now() + timedelta(days=335)).date()"/>
        <field name="recognition_method">straight_line</field>
        <field name="recognition_frequency">monthly</field>
        <field name="state">active</field>
        <field name="is_auto_recognition" eval="True"/>
        <field name="performance_obligation_id">PO-METRO-ENT-2024</field>
        <field name="partner_id" ref="demo_customer_medical_group"/>
        <field name="product_id" ref="demo_product_enterprise_membership"/>
    </record>

    <record id="demo_revenue_schedule_dr_smith_individual" model="ams.revenue.schedule">
        <field name="name">Individual Membership - Dr. Smith</field>
        <field name="total_contract_value">500.00</field>
        <field name="start_date" eval="(datetime.now() - timedelta(days=90)).date()"/>
        <field name="end_date" eval="(datetime.now() + timedelta(days=275)).date()"/>
        <field name="recognition_method">straight_line</field>
        <field name="recognition_frequency">monthly</field>
        <field name="state">active</field>
        <field name="is_auto_recognition" eval="True"/>
        <field name="performance_obligation_id">PO-SMITH-IND-2024</field>
        <field name="partner_id" ref="demo_customer_dr_smith"/>
        <field name="product_id" ref="demo_product_individual_membership"/>
    </record>

    <record id="demo_revenue_schedule_dr_smith_publication" model="ams.revenue.schedule">
        <field name="name">Medical Journal - Dr. Smith</field>
        <field name="total_contract_value">200.00</field>
        <field name="start_date" eval="(datetime.now() - timedelta(days=45)).date()"/>
        <field name="end_date" eval="(datetime.now() + timedelta(days=320)).date()"/>
        <field name="recognition_method">straight_line</field>
        <field name="recognition_frequency">monthly</field>
        <field name="state">active</field>
        <field name="is_auto_recognition" eval="True"/>
        <field name="performance_obligation_id">PO-SMITH-PUB-2024</field>
        <field name="partner_id" ref="demo_customer_dr_smith"/>
        <field name="product_id" ref="demo_product_publication"/>
    </record>

    <record id="demo_revenue_schedule_completed" model="ams.revenue.schedule">
        <field name="name">Completed Individual Membership</field>
        <field name="total_contract_value">500.00</field>
        <field name="start_date" eval="(datetime.now() - timedelta(days=400)).date()"/>
        <field name="end_date" eval="(datetime.now() - timedelta(days=35)).date()"/>
        <field name="recognition_method">straight_line</field>
        <field name="recognition_frequency">monthly</field>
        <field name="state">completed</field>
        <field name="is_auto_recognition" eval="True"/>
        <field name="performance_obligation_id">PO-COMPLETED-2024</field>
        <field name="partner_id" ref="demo_customer_dr_smith"/>
        <field name="product_id" ref="demo_product_individual_membership"/>
    </record>

    <!-- Demo Revenue Recognition Entries (Past Recognitions) -->
    <record id="demo_recognition_acme_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_acme_enterprise"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=60)).date()"/>
        <field name="planned_amount">416.67</field>
        <field name="recognized_amount">416.67</field>
        <field name="state">posted</field>
        <field name="period_number">1</field>
        <field name="processed_date" eval="datetime.now() - timedelta(days=60)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <record id="demo_recognition_acme_2" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_acme_enterprise"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=30)).date()"/>
        <field name="planned_amount">416.67</field>
        <field name="recognized_amount">416.67</field>
        <field name="state">posted</field>
        <field name="period_number">2</field>
        <field name="processed_date" eval="datetime.now() - timedelta(days=30)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <record id="demo_recognition_medical_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_medical_group"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=30)).date()"/>
        <field name="planned_amount">416.67</field>
        <field name="recognized_amount">416.67</field>
        <field name="state">posted</field>
        <field name="period_number">1</field>
        <field name="processed_date" eval="datetime.now() - timedelta(days=30)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <record id="demo_recognition_smith_individual_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_individual"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=90)).date()"/>
        <field name="planned_amount">41.67</field>
        <field name="recognized_amount">41.67</field>
        <field name="state">posted</field>
        <field name="period_number">1</field>
        <field name="processed_date" eval="datetime.now() - timedelta(days=90)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <record id="demo_recognition_smith_individual_2" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_individual"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=60)).date()"/>
        <field name="planned_amount">41.67</field>
        <field name="recognized_amount">41.67</field>
        <field name="state">posted</field>
        <field name="period_number">2</field>
        <field name="processed_date" eval="datetime.now() - timedelta(days=60)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <record id="demo_recognition_smith_individual_3" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_individual"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=30)).date()"/>
        <field name="planned_amount">41.67</field>
        <field name="recognized_amount">41.67</field>
        <field name="state">posted</field>
        <field name="period_number">3</field>
        <field name="processed_date" eval="datetime.now() - timedelta(days=30)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <record id="demo_recognition_smith_publication_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_publication"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=45)).date()"/>
        <field name="planned_amount">16.67</field>
        <field name="recognized_amount">16.67</field>
        <field name="state">posted</field>
        <field name="period_number">1</field>
        <field name="processed_date" eval="datetime.now() - timedelta(days=45)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <!-- Demo Future Revenue Recognition Entries (Upcoming) -->
    <record id="demo_recognition_acme_future_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_acme_enterprise"/>
        <field name="recognition_date" eval="datetime.now().date()"/>
        <field name="planned_amount">416.67</field>
        <field name="recognized_amount">416.67</field>
        <field name="state">draft</field>
        <field name="period_number">3</field>
    </record>

    <record id="demo_recognition_acme_future_2" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_acme_enterprise"/>
        <field name="recognition_date" eval="(datetime.now() + timedelta(days=30)).date()"/>
        <field name="planned_amount">416.67</field>
        <field name="recognized_amount">416.67</field>
        <field name="state">draft</field>
        <field name="period_number">4</field>
    </record>

    <record id="demo_recognition_medical_future_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_medical_group"/>
        <field name="recognition_date" eval="datetime.now().date()"/>
        <field name="planned_amount">416.67</field>
        <field name="recognized_amount">416.67</field>
        <field name="state">draft</field>
        <field name="period_number">2</field>
    </record>

    <record id="demo_recognition_smith_individual_future_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_individual"/>
        <field name="recognition_date" eval="datetime.now().date()"/>
        <field name="planned_amount">41.67</field>
        <field name="recognized_amount">41.67</field>
        <field name="state">draft</field>
        <field name="period_number">4</field>
    </record>

    <record id="demo_recognition_smith_publication_future_1" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_publication"/>
        <field name="recognition_date" eval="datetime.now().date()"/>
        <field name="planned_amount">16.67</field>
        <field name="recognized_amount">16.67</field>
        <field name="state">draft</field>
        <field name="period_number">2</field>
    </record>

    <!-- Demo Contract Modifications -->
    <record id="demo_contract_modification_acme_upgrade" model="ams.contract.modification">
        <field name="name">ACME Corp Membership Upgrade</field>
        <field name="schedule_id" ref="demo_revenue_schedule_acme_enterprise"/>
        <field name="modification_type">upgrade</field>
        <field name="modification_date" eval="(datetime.now() - timedelta(days=15)).date()"/>
        <field name="effective_date" eval="(datetime.now() - timedelta(days=15)).date()"/>
        <field name="reason">Customer requested upgrade to premium enterprise features including additional user seats and priority support.</field>
        <field name="original_contract_value">5000.00</field>
        <field name="new_contract_value">6000.00</field>
        <field name="recognized_to_date">833.34</field>
        <field name="processing_method">prospective</field>
        <field name="state">processed</field>
        <field name="approved_by" ref="base.user_admin"/>
        <field name="approval_date" eval="datetime.now() - timedelta(days=14)"/>
        <field name="processed_by" ref="base.user_admin"/>
        <field name="processed_date" eval="datetime.now() - timedelta(days=13)"/>
    </record>

    <record id="demo_contract_modification_smith_downgrade" model="ams.contract.modification">
        <field name="name">Dr. Smith Subscription Adjustment</field>
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_individual"/>
        <field name="modification_type">price_change</field>
        <field name="modification_date" eval="(datetime.now() - timedelta(days=45)).date()"/>
        <field name="effective_date" eval="(datetime.now() - timedelta(days=45)).date()"/>
        <field name="reason">Applied member discount for early payment and loyalty program benefits.</field>
        <field name="original_contract_value">500.00</field>
        <field name="new_contract_value">450.00</field>
        <field name="recognized_to_date">41.67</field>
        <field name="processing_method">prospective</field>
        <field name="state">processed</field>
        <field name="approved_by" ref="base.user_admin"/>
        <field name="approval_date" eval="datetime.now() - timedelta(days=44)"/>
        <field name="processed_by" ref="base.user_admin"/>
        <field name="processed_date" eval="datetime.now() - timedelta(days=43)"/>
    </record>

    <record id="demo_contract_modification_pending" model="ams.contract.modification">
        <field name="name">Metro Medical Contract Extension</field>
        <field name="schedule_id" ref="demo_revenue_schedule_medical_group"/>
        <field name="modification_type">extension</field>
        <field name="modification_date" eval="datetime.now().date()"/>
        <field name="effective_date" eval="(datetime.now() + timedelta(days=15)).date()"/>
        <field name="reason">Customer requested 6-month contract extension with additional training services.</field>
        <field name="original_contract_value">5000.00</field>
        <field name="new_contract_value">7500.00</field>
        <field name="recognized_to_date">416.67</field>
        <field name="processing_method">prospective</field>
        <field name="state">validated</field>
    </record>

    <!-- Demo Error Recognition Entry -->
    <record id="demo_recognition_error" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_dr_smith_publication"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=15)).date()"/>
        <field name="planned_amount">16.67</field>
        <field name="recognized_amount">0.00</field>
        <field name="state">error</field>
        <field name="period_number">2</field>
        <field name="error_message">GL account configuration missing for publication revenue. Please configure revenue account in product settings.</field>
    </record>

    <!-- Demo Adjustment Recognition Entry -->
    <record id="demo_recognition_adjustment" model="ams.revenue.recognition">
        <field name="schedule_id" ref="demo_revenue_schedule_acme_enterprise"/>
        <field name="recognition_date" eval="(datetime.now() - timedelta(days=10)).date()"/>
        <field name="planned_amount">416.67</field>
        <field name="recognized_amount">500.00</field>
        <field name="state">posted</field>
        <field name="period_number">3</field>
        <field name="is_adjustment" eval="True"/>
        <field name="adjustment_reason">contract_modification: ACME Corp Membership Upgrade - Catch-up recognition for additional contract value</field>
        <field name="modification_id" ref="demo_contract_modification_acme_upgrade"/>
        <field name="processed_date" eval="datetime.now() - timedelta(days=10)"/>
        <field name="processed_by" ref="base.user_admin"/>
    </record>

    <!-- Demo Dashboard Record -->
    <record id="demo_revenue_dashboard_main" model="ams.revenue.dashboard">
        <field name="name">Main Revenue Recognition Dashboard</field>
    </record>

    <!-- Demo Notes and Comments (via mail.message) -->
    <record id="demo_message_acme_schedule" model="mail.message">
        <field name="model">ams.revenue.schedule</field>
        <field name="res_id" ref="demo_revenue_schedule_acme_enterprise"/>
        <field name="message_type">comment</field>
        <field name="author_id" ref="base.partner_admin"/>
        <field name="body"><![CDATA[<p>Schedule created for ACME Corporation's enterprise membership. Annual contract with monthly revenue recognition over 12 months.</p>]]></field>
        <field name="date" eval="datetime.now() - timedelta(days=60)"/>
    </record>

    <record id="demo_message_modification_approved" model="mail.message">
        <field name="model">ams.contract.modification</field>
        <field name="res_id" ref="demo_contract_modification_acme_upgrade"/>
        <field name="message_type">comment</field>
        <field name="author_id" ref="base.partner_admin"/>
        <field name="body"><![CDATA[<p>Contract modification approved. Upgrade increases annual value from $5,000 to $6,000. Prospective recognition method applied.</p>]]></field>
        <field name="date" eval="datetime.now() - timedelta(days=14)"/>
    </record>

    <!-- Demo Activities -->
    <record id="demo_activity_pending_modification" model="mail.activity">
        <field name="activity_type_id" ref="ams_revenue_recognition.mail_activity_type_contract_modification_approval"/>
        <field name="summary">Review Contract Extension</field>
        <field name="note">Metro Medical Group has requested a contract extension. Please review and approve the modification.</field>
        <field name="res_model_id" ref="model_ams_contract_modification"/>
        <field name="res_id" ref="demo_contract_modification_pending"/>
        <field name="user_id" ref="base.user_admin"/>
        <field name="date_deadline" eval="(datetime.now() + timedelta(days=2)).date()"/>
    </record>

    <!-- Populate Revenue Recognition Stats -->
    <function model="ams.revenue.schedule" name="_compute_revenue_amounts">
        <value eval="[ref('demo_revenue_schedule_acme_enterprise'), ref('demo_revenue_schedule_medical_group'), ref('demo_revenue_schedule_dr_smith_individual'), ref('demo_revenue_schedule_dr_smith_publication')]"/>
    </function>

    <function model="ams.revenue.recognition" name="_compute_adjustment_amount">
        <value eval="[ref('demo_recognition_acme_1'), ref('demo_recognition_acme_2'), ref('demo_recognition_medical_1'), ref('demo_recognition_smith_individual_1'), ref('demo_recognition_smith_individual_2'), ref('demo_recognition_smith_individual_3'), ref('demo_recognition_smith_publication_1'), ref('demo_recognition_adjustment')]"/>
    </function>

    <function model="ams.contract.modification" name="_compute_financial_impact">
        <value eval="[ref('demo_contract_modification_acme_upgrade'), ref('demo_contract_modification_smith_downgrade'), ref('demo_contract_modification_pending')]"/>
    </function>
</odoo>